# 旅游安全医学科普小程序 开发文档

版本: v0.1
日期: 2025-xx-xx

## 1. 理解阶段（需求与现状）

### 1.1 需求理解
- 形态: 微信小程序
- 目标: 旅游安全医学科普内容的新闻流展示与详情阅读
- 页面: 仅首页信息流 + 详情页
- 风格: 蓝色基调，强调专业、安全、可信
- 参考: 类似“今日头条”的信息流体验（卡片列表 + 点击进入详情）

### 1.2 原则切入点（初步识别）
- KISS: 聚焦列表与详情两页，避免复杂频道/社区功能
- YAGNI: 暂不做账号体系、评论、推荐、收藏等
- DRY: 内容渲染采用统一内容块结构，列表/详情字段复用
- SOLID: 页面与数据服务解耦，组件单一职责

## 2. 规划阶段（目标与范围）

### 2.1 迭代目标
- 打通信息流到详情页的核心阅读链路
- 构建蓝色主题的视觉规范与组件样式
- 建立最小可用的数据模型与接口约定

### 2.2 范围定义
- In: 首页列表、详情阅读、分页加载、骨架屏、错误态
- Out: 频道、评论、点赞、搜索、登录、推送

### 2.3 可衡量成果
- 首屏加载 < 1.5s（4G）
- 列表可分页滚动，详情可完整阅读
- 视觉风格统一，蓝色基调一致

## 3. 执行阶段（分步实施）

### 3.1 页面与组件拆分（SRP + KISS）
- 页面: `pages/home`、`pages/detail`
- 组件: `components/article-card`、`components/skeleton`、`components/warning-block`
- 原则体现: 页面只处理布局与交互，数据请求交给 service 层

### 3.2 信息流设计（KISS + DRY）
- 卡片结构: 封面图 + 标题 + 摘要 + 标签 + 阅读量
- 列表行为: 下拉刷新、上拉加载
- 复用: 列表与详情共用 `Article` 数据模型

### 3.3 详情阅读设计（KISS + SOLID）
- 内容块: paragraph / warning / image
- 详情页渲染器仅处理内容块，不关心数据来源
- 重要提示以“警示块”突出显示

### 3.4 视觉规范（蓝色基调）
- 主色: #1E6BFF（品牌蓝）
- 深色: #0B2E8A（标题与强调）
- 浅色: #F3F7FF（背景与卡片阴影）
- 中性色: #0E1B3A / #3B4A6B（正文与辅助文案）
- 原则体现: 颜色变量集中管理，避免重复（DRY）

### 3.5 数据模型（DRY + YAGNI）
- 最小字段满足列表与详情
- 统一字段结构便于后期扩展

```json
{
  "id": "a_1001",
  "title": "高原反应的早期识别与自救",
  "summary": "如何判断高原反应、紧急处理要点与预防建议",
  "cover": "/assets/covers/a_1001.jpg",
  "publishTime": "2025-01-12",
  "readCount": 1532,
  "riskLevel": "medium",
  "contentBlocks": [
    {"type": "paragraph", "text": "高原反应常见于..."},
    {"type": "warning", "text": "如出现持续性呼吸困难应立即就医"},
    {"type": "image", "url": "/assets/img/1.jpg", "caption": "正确测量血氧"}
  ],
  "sources": ["WHO 2024 指南", "国家卫健委 科普资料"]
}
```

### 3.6 接口设计（KISS）
- 阶段一: 本地 JSON mock
- 阶段二: 云开发/REST

```http
GET /api/articles?page=1&pageSize=10
GET /api/articles/:id
```

### 3.7 目录结构建议（SOLID）
```
/miniprogram
  /pages
    /home
    /detail
  /components
    /article-card
    /skeleton
    /warning-block
  /services
    api.js
  /utils
    cache.js
  /assets
```

### 3.8 性能与体验
- 图片懒加载与压缩（300-600px）
- 列表缓存 5-10 分钟
- 骨架屏减少白屏感

### 3.9 合规与安全
- 医学免责声明置于详情页尾部
- 引用来源必须展示
- 禁用未知富文本标签，采用结构化内容块

## 4. 汇报阶段（总结与展望）

### 4.1 本次已完成核心任务
- 明确需求边界与两页结构
- 提供蓝色基调视觉规范
- 定义数据模型与接口草案

### 4.2 原则应用与收益
- KISS: 仅保留列表与详情，链路更清晰
- YAGNI: 暂不引入账号与推荐，降低复杂度
- DRY: 统一内容块与样式变量，减少重复
- SOLID: 页面、组件、服务层分离，便于维护

### 4.3 可能挑战与应对
- 内容合规风险: 强制来源字段+免责声明
- 富文本渲染受限: 结构化内容块替代
- 首屏性能压力: 图片压缩+懒加载

### 4.4 下一步计划与建议
- 确认内容来源与审核流程
- 选择后端形态（云开发/REST）
- 根据 UI 规范输出首版原型与切图